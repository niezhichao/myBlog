<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.nzc.blog.business.dao.BlogDao">
    <insert id="insertOne" parameterType="BlogInfo">
            insert into blog_info (
            blog_id,
            title,
            content,
            tag_id,
            file_id,
            status,
            create_time,
            update_time,
            publish_time,
            is_original,
            author,
            articles_part,
            blog_sort_id,
            is_publish,
            sort) values (
            #{pid},
            #{title},
            #{content},
            #{tagId},
            #{fileId},
            #{status},
            #{createTime},
            #{updateTime},
            #{publicTime},
            #{ifOriginal},
            #{author},
            #{articlesQuoted},
            #{blogSortedId},
            #{ifPublish},
            #{sort}
            )
        </insert>

    <select id="queryList" parameterType="BlogInfo" resultType="BlogInfo">
          select
          a.title as title,
          a.author as author,
          a.create_time as createTime,
          a.update_time as updateTime,
          a.publish_time as publicTime,
          a.blog_sort_id as blogSortedId,
          a.is_publish as ifPublish
          from blog_info a where 1=1
          <if test="title != null and title !=''">
                  and title like concat('%',#{title} ,'%')
          </if>
           <if test="blogSortedId != null and  blogSortedId !=''">
                  and a.blog_sort_id = #{blogSortedId}
           </if>
    </select>

    <select id="queryAll" parameterType="BlogInfo" resultType="BlogInfo">
         select
          a.title as title,
          a.author as author,
          a.create_time as createTime,
          a.update_time as updateTime,
          a.publish_time as publicTime,
          a.blog_sort_id as blogSortedId,
          a.is_publish as ifPublish
          from blog_info a
    </select>
</mapper>

